var ImageZoom=function(){"use strict";!function(){if("undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLElement){var t=!1;try{var n=document.createElement("div");n.addEventListener("focus",(function(t){t.preventDefault(),t.stopPropagation()}),!0),n.focus(Object.defineProperty({},"preventScroll",{get:function(){t=!0}}))}catch(t){}if(void 0===HTMLElement.prototype.nativeFocus&&!t){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var o=function(t){for(var n=0;n<t.length;n++)t[n][0].scrollTop=t[n][1],t[n][0].scrollLeft=t[n][2];t=[]};HTMLElement.prototype.focus=function(t){if(t&&t.preventScroll){var n=function(t){for(var n=t.parentNode,o=[],e=document.scrollingElement||document.documentElement;n&&n!==e;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&o.push([n,n.scrollTop,n.scrollLeft]),n=n.parentNode;return n=e,o.push([n,n.scrollTop,n.scrollLeft]),o}(this);this.nativeFocus(),"function"==typeof setTimeout?setTimeout((function(){o(n)}),0):o(n)}else this.nativeFocus()}}}}();var t,n=function(t,n,o,e){void 0===e&&(e=!1),o.addEventListener(t,n,e)},o=function(t,n){return n.appendChild(t)},e=function(t){null==t||t.blur()},i=function(t,n){return void 0===t&&(t=!0),n.cloneNode(t)},r=function(t){return document.createElement(t)},a=function(t,n){for(var o,e=(null===(o=n.parentNode)||void 0===o?void 0:o.children)||[],i=0;i<e.length;i++){var r=e[i];r&&r!==n&&t(r)}},c=function(t){return t?t.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}},u=function(){return window.innerHeight},d=function(){return window.innerWidth},l=function(t,n,o){var e=d()/(t+o),i=u()/(n+o);return Math.min(e,i)},f=function(t,n,o,e,i){var r=l(n,e,i),a=n>e?n/t:e/o;return r>1?a:r*a},s=function(t){return t.style},v=function(t,n){n.removeAttribute(t)},p=function(t,n){n.contains(t)&&n.removeChild(t)},m=function(t,n,o,e){void 0===e&&(e=!1),o.removeEventListener(t,n,e)},h=function(t,n,o){return o.setAttribute(t,n)},g=function(t,n,o){s(o)[t]=n};!function(t){t.LOADED="LOADED",t.UNLOADED="UNLOADED",t.UNLOADING="UNLOADING"}(t||(t={}));var y=t.LOADED,b=t.UNLOADED,x=t.UNLOADING,w=function(t,n){void 0===t&&(t={preventScroll:!1}),null==n||n.focus(t)}.bind(null,{preventScroll:!0}),L="none",T="top:0;right:0;bottom:0;left:0;",E="display:block;",z="height:100%;",D="max-height:100%;",N="max-width:100%;",k="position:absolute;",O="ease",A="width:100%;",C=k+"touch-action:manipulation;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;margin:0;padding:0;",M=C+"cursor:pointer;cursor:-webkit-zoom-in;cursor:zoom-in;",H=C+T+z+A+"cursor:pointer;cursor:-webkit-zoom-out;cursor:zoom-out;z-index:1;",S=k+"visibility:hidden;",Z=/\.svg$/i,I=function(t){return"Escape"===t.key||27===t.keyCode},U=function(t){var n=t.tagName;return"SCRIPT"===n||"NOSCRIPT"===n||"STYLE"===n};return function(t,C){var F,W,B,P,G,R,j,q,Y,$=void 0===t?{}:t,J=$.closeText,K=void 0===J?"Unzoom image":J,Q=$.isControlled,V=void 0!==Q&&Q,X=$.modalText,_=void 0===X?"Zoomed item":X,tt=$.onZoomChange,nt=$.openText,ot=void 0===nt?"Zoom image":nt,et=$.overlayBgColor,it=void 0===et?"#fff":et,rt=$.overlayOpacity,at=void 0===rt?.95:rt,ct=$.transitionDuration,ut=void 0===ct?300:ct,dt=$.zoomMargin,lt=void 0===dt?0:dt,ft=$.zoomZindex,st=void 0===ft?2147483647:ft,vt="IMG"===C.tagName,pt=!(vt&&Z.test(C.currentSrc))&&vt,mt=document.body,ht=window,gt=[],yt=b,bt=ut,xt=function(){n("resize",St,window),Lt(),vt&&!C.complete?n("load",Et,C):Et()},wt=C.cloneNode(!0),Lt=function(){(G=window.matchMedia("(prefers-reduced-motion:reduce)")).addListener(Tt)},Tt=function(){bt=0},Et=function(){if(C&&yt===b){var t=c(C),o=t.height,e=t.width,i=C,a=i.naturalHeight,u=i.naturalWidth;(pt&&a&&u?f(e,u,o,a,lt):l(e,o,lt))>1?(R=r("button"),h("aria-label",ot,R),h("style",M,R),h("type","button",R),Dt(),n("click",Ct,R),C.insertAdjacentElement("afterend",R)):(At(),Ot()),(Y=new MutationObserver((function(){C&&(yt!==b||wt.isEqualNode(C)||(zt(),wt=C.cloneNode(!0)))}))).observe(mt,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}},zt=function(){Nt(),xt()},Dt=function(){if(R){var t,n=c(C),o=n.height,e=n.width,i=(t=C,window.getComputedStyle(t)),r=i.display,a=parseFloat(i.marginLeft),u=parseFloat(i.marginTop);g("width",e+"px",R),g("height",o+"px",R),g("marginLeft",a+"px",R),"block"===r||"flex"===r||"grid"===r||"table"===r?g("marginTop","-"+(u+o)+"px",R):g("marginLeft",a-e+"px",R)}},Nt=function(){At(),null==Y||Y.disconnect(),Y=void 0,kt(),Ot(),null==G||G.removeListener(Tt),G=void 0,m("resize",St,window)},kt=function(){pt&&C&&m("load",Et,C)},Ot=function(){R&&(m("click",Ct,R),p(R,R.parentNode)),R=void 0},At=function(){m("scroll",Wt,ht),m("keydown",Bt,document),q&&(m("load",It,q),m("transitionend",Ut,q),m("transitionend",Zt,q)),B&&m("click",Mt,B),F&&m("focus",Ht,F),W&&m("focus",Ht,W),P&&(m("click",Ft,P),p(P,mt)),q=void 0,B=void 0,F=void 0,W=void 0,j=void 0,P=void 0},Ct=function(){tt&&tt(!0),V||Gt()},Mt=function(){tt&&tt(!1),V||$t()},Ht=function(){w(B)},St=function(){yt===y?Pt(!0):zt()},Zt=function(){w(B)},It=function(){q&&(P=qt())&&(o(P,mt),n("keydown",Bt,document),n("scroll",Wt,ht),C&&g("visibility","hidden",C),q&&n("transitionend",Zt,q),yt=y,Pt(!1),Yt(),j&&(h("style",k+T+"background-color:"+it+";transition:opacity "+bt+"ms "+O+";opacity:0;",j),g("opacity",""+at,j)))},Ut=function(){C&&g("visibility","",C),yt=b,Pt(!0),At(),w(R)},Ft=function(){tt&&tt(!1),V||$t()},Wt=function(){yt===y?(tt&&tt(!1),V||$t()):yt===x&&Pt(!1)},Bt=function(t){I(t)&&(t.stopPropagation(),tt&&tt(!1),V||$t())},Pt=function(t){if(C&&q){var n,o,e=t?0:bt,i=C.getBoundingClientRect(),r=i.height,a=i.left,c=i.top,v=i.width,p=(n="transform",s(C)[n]);if(yt!==y)o="scale(1) translate(0,0)"+(p?" "+p:"");else{var m=l(v,r,lt);if(pt){var g=C,b=g.naturalHeight,x=g.naturalWidth;b&&x&&(m=f(v,x,r,b,lt))}o="scale("+m+") translate("+(d()/2-(a+v/2))/m+"px,"+(u()/2-(c+r/2))/m+"px)"+(p?" "+p:"")}h("style",k+E+N+D+"width:"+v+"px;height:"+r+"px;left:"+a+"px;top:"+c+"px;transition:transform "+e+"ms "+O+";-webkit-transform:"+o+";-ms-transform:"+o+";transform:"+o+";",q)}},Gt=function(){vt?Rt():jt(),e(R)},Rt=function(){C&&yt===b&&(q=i(!0,C),v("id",q),h("data-rmiz-zoomed","",q),n("load",It,q))},jt=function(){if(C&&yt===b){q=r("div"),h("data-rmiz-zoomed","",q),h("style",S,q);var t=i(!0,C);v("id",t),g("maxWidth",L,t),g("maxHeight",L,t),o(t,q),It()}},qt=function(){if(q){var t=r("div");return h("aria-label",_,t),h("aria-modal","true",t),h("data-rmiz-overlay","",t),h("role","dialog",t),h("style","position:fixed;"+T+A+z+"z-index:"+st+";",t),n("click",Ft,t),j=r("div"),F=r("div"),h("tabindex","0",F),n("focus",Ht,F),W=r("div"),h("tabindex","0",W),n("focus",Ht,W),B=r("button"),h("aria-label",K,B),h("style",H,B),h("type","button",t),n("click",Mt,B),o(j,t),o(F,t),o(B,t),o(q,t),o(W,t),t}},Yt=function(){P&&a((function(t){if(!U(t)){var n=function(t,n){return n.getAttribute(t)}("aria-hidden",t);n&&gt.push([t,n]),t.setAttribute("aria-hidden","true")}}),P)},$t=function(){yt===y?(e(B),P&&a((function(t){U(t)||v("aria-hidden",t)}),P),gt.forEach((function(t){var n=t[0],o=t[1];n&&h("aria-hidden",o,n)})),gt=[],q&&n("transitionend",Ut,q),yt=x,Pt(!1),j&&g("opacity","0",j)):Pt(!1)};return xt(),{cleanup:Nt,update:function(t){void 0===t&&(t={}),t.closeText&&(K=t.closeText),t.modalText&&(_=t.modalText),t.openText&&(ot=t.openText),t.overlayBgColor&&(it=t.overlayBgColor),t.overlayOpacity&&(at=t.overlayOpacity),t.transitionDuration&&(bt=t.transitionDuration),t.zoomMargin&&(lt=t.zoomMargin),t.zoomZindex&&(st=t.zoomZindex),Pt(!1),yt===b&&t.isZoomed?Gt():yt===y&&!1===t.isZoomed&&$t()}}}}();
