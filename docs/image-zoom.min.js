var ImageZoom=function(){"use strict";var n;!function(){if("undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLElement){var n=!1;try{var t=document.createElement("div");t.addEventListener("focus",(function(n){n.preventDefault(),n.stopPropagation()}),!0),t.focus(Object.defineProperty({},"preventScroll",{get:function(){n=!0}}))}catch(n){}if(void 0===HTMLElement.prototype.nativeFocus&&!n){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var o=function(n){for(var t=0;t<n.length;t++)n[t][0].scrollTop=n[t][1],n[t][0].scrollLeft=n[t][2];n=[]};HTMLElement.prototype.focus=function(n){if(n&&n.preventScroll){var t=function(n){for(var t=n.parentNode,o=[],e=document.scrollingElement||document.documentElement;t&&t!==e;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&o.push([t,t.scrollTop,t.scrollLeft]),t=t.parentNode;return t=e,o.push([t,t.scrollTop,t.scrollLeft]),o}(this);this.nativeFocus(),"function"==typeof setTimeout?setTimeout((function(){o(t)}),0):o(t)}else this.nativeFocus()}}}}(),function(n){n.LOADED="LOADED",n.UNLOADED="UNLOADED",n.UNLOADING="UNLOADING"}(n||(n={}));var t="div",o="none",e="style",i="position:absolute;",r="position:relative;display:block;",a="position:relative;display:inline-block;vertical-align:top;",u=i+"top:0;right:0;bottom:0;left:0;height:100%;width:100%;background:none;border:none;margin:0;padding:0;"+"touch-action:manipulation;-webkit-appearance:none;-moz-appearance:none;appearance:none;",c=u+"cursor:pointer;cursor:-webkit-zoom-in;cursor:zoom-in;",d=u+"cursor:pointer;cursor:-webkit-zoom-out;cursor:zoom-out;z-index:1;",l=i+"visibility:hidden;",f="display:block;height:100%;max-width:100%;",s=function(n,t){return i+"top:0;right:0;bottom:0;left:0;transition:background "+(t?t/3:t)+"ms cubic-bezier(.42,0,.58,1);;background:"+n+";"},v=function(n){return"position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:"+n+";"},p=function(n,t,o,e,r,a){return i+"height:"+n+"px;width:"+t+"px;left:"+o+"px;top:"+e+"px;transition:transform "+a+"ms cubic-bezier(.42,0,.58,1);;-webkit-transform:"+r+";-ms-transform:"+r+";transform:"+r+";"},m=function(t,e,i,r,a,u){if(!i)return p(0,0,0,0,o,0);var c=i.getBoundingClientRect(),d=c.height,l=c.left,f=c.top,s=c.width,v=S("transform",r);if(u!==n.LOADED)return p(d,s,l,f,"scale(1) translate(0,0)"+(v?" "+v:""),t);var m=r,h=m.naturalHeight,D=m.naturalWidth,y=a&&h&&D?b(d,s,e,h,D):g(d,s,e),w=window.innerWidth/2,E=window.innerHeight/2;return p(d,s,l,f,"scale("+y+") translate("+(w-(l+s/2))/y+"px,"+(E-(f+d/2))/y+"px)"+(v?" "+v:""),t)},h=function(n){return"Escape"===n.key||27===n.keyCode},g=function(n,t,o){var e=window.innerWidth/(t+o),i=window.innerHeight/(n+o);return Math.min(e,i)},b=function(n,t,o,e,i){var r=g(e,i,o),a=i>e?i/t:e/n;return r>1?a:r*a},D=/\.svg$/i,y=function(n,t){return t.appendChild(n)},w=function(n,t){n&&t&&t.removeChild(n)},E=function(n){return document.createElement(n)},L=function(n,t){return t.cloneNode(n)},x=function(n){null==n||n.blur()},N=function(n){n&&n.focus({preventScroll:!0})},k=function(n,t){for(var o,e=(null===(o=t.parentNode)||void 0===o?void 0:o.children)||[],i=0;i<e.length;i++){var r=e[i];if(console.log(r),!r)return;var a=r.tagName;if("SCRIPT"===a||"NOSCRIPT"===a||"STYLE"===a||r===t)return;n(r)}},A=function(n,t,o,e){void 0===e&&(e=!1),o.addEventListener(n,t,e)},T=function(n,t,o,e){void 0===e&&(e=!1),o.removeEventListener(n,t,e)},z=function(n,t){t.removeAttribute(n)},O=function(n,t,o){return o.setAttribute(n,t)},C=function(n){return n.style},S=function(n,t){return C(t)[n]},U=function(n,t,o){C(o)[n]=t},M=function(n){return window.getComputedStyle(n)};return function(u,p){var C,H,B,Z,W,I,P,F,G,R,j,Y,$=void 0===u?{}:u,q=$.closeText,J=void 0===q?"Unzoom image":q,K=$.isControlled,Q=void 0!==K&&K,V=$.modalText,X=void 0===V?"Zoomed item":V,_=$.onZoomChange,nn=$.openText,tn=void 0===nn?"Zoom image":nn,on=$.overlayBgColorEnd,en=void 0===on?"rgba(255,255,255,0.95)":on,rn=$.overlayBgColorStart,an=void 0===rn?"rgba(255,255,255,0)":rn,un=$.transitionDuration,cn=void 0===un?300:un,dn=$.zoomMargin,ln=void 0===dn?0:dn,fn=$.zoomZindex,sn=void 0===fn?2147483647:fn,vn="IMG"===p.tagName,pn=!(vn&&D.test(p.currentSrc))&&vn,mn=document.body,hn=window,gn=[],bn=n.UNLOADED,Dn=cn,yn="",wn="",En="",Ln=function(){A("resize",Wn,window),Nn(),pn&&!p.complete?A("load",An,p):An()},xn=function(){null==P||P.disconnect(),P=void 0},Nn=function(){(I=window.matchMedia("(prefers-reduced-motion:reduce)")).addListener(kn)},kn=function(){Dn=0},An=function(){if(p&&bn===n.UNLOADED){var t=p.getBoundingClientRect(),e=t.height,i=t.width,r=p,a=r.naturalHeight,u=r.naturalWidth;if((pn&&a&&u?b(e,i,ln,a,u):g(e,i,ln))>1){if(!R){var c=getComputedStyle(p);wn=c.display,En=c.maxWidth,yn=S("display",p),R=Tn(),j=zn(),F=On(),U("margin",M(p).margin,j),U("margin","0",R),y(R,j),y(F,j),p.parentNode&&(U("display",o,p),p.parentNode.insertBefore(j,p)),(P=new MutationObserver((function(){Cn(),Ln()}))).observe(p,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}}else Mn(),xn(),Sn(),Un()}},Tn=function(){var n=L(!0,p);return z("tabindex",n),(pn||"block"!==wn)&&(U("display","block",n),U("maxWidth",En||"100%",n)),n},zn=function(){var n=E(t),o="block"===wn?r:a;return O("data-rmiz-wrap","",n),O(e,o,n),n},On=function(){var n=E("button");return O("aria-label",tn,n),O(e,c,n),O("type","button",n),A("click",Hn,n),n},Cn=function(){Mn(),xn(),Sn(),Un(),null==I||I.removeListener(kn),I=void 0,T("resize",Wn,window)},Sn=function(){pn&&p&&T("load",An,p)},Un=function(){F&&T("click",Hn,F),w(j,null==j?void 0:j.parentNode),U("display",yn,p),F=void 0,j=void 0,R=void 0},Mn=function(){T("scroll",Rn,hn),T("keydown",jn,document),C&&T("load",Pn,C),Y&&(T("transitionend",Fn,Y),T("transitionend",In,Y)),H&&T("click",Bn,H),B&&T("focus",Zn,B),Z&&T("focus",Zn,Z),W&&(T("click",Gn,W),w(W,mn)),C=void 0,H=void 0,B=void 0,Z=void 0,Y=void 0,G=void 0,W=void 0},Hn=function(n){n.preventDefault(),_&&_(!0),Q||qn()},Bn=function(n){n.preventDefault(),_&&_(!1),Q||Xn()},Zn=function(){N(H)},Wn=function(){bn===n.LOADED?$n(!0):An()},In=function(){N(H)},Pn=function(){R&&U("visibility","hidden",R),G&&O(e,s(en,Dn),G),Y&&(A("transitionend",In,Y),O(e,i,Y)),Yn(n.LOADED)},Fn=function(){window.setTimeout((function(){R&&U("visibility","",R),Mn(),Yn(n.UNLOADED),N(F)}),0)},Gn=function(){_&&_(!1),Q||Xn()},Rn=function(){_&&_(!1),Q||Xn()},jn=function(n){h(n)&&(n.stopPropagation(),_&&_(!1),Q||Xn())},Yn=function(n){bn=n,$n()},$n=function(n){void 0===n&&(n=!1),R&&Y&&O(e,m(n?0:Dn,ln,j,R,pn,bn),Y)},qn=function(){pn?Jn():Kn(),x(F),Vn()},Jn=function(){R&&bn===n.UNLOADED&&(C=L(!0,R),A("load",Pn,C),z("id",C),z("class",C),O(e,f,C),W=Qn(C),y(W,mn),A("keydown",jn,document),A("scroll",Rn,hn))},Kn=function(){if(R&&bn===n.UNLOADED){var t=L(!0,R);z("id",t),W=Qn(t),y(W,mn),A("keydown",jn,document),A("scroll",Rn,hn),Pn()}},Qn=function(n){var o=E(t);return O("aria-label",X,o),O("aria-modal","true",o),O("data-rmiz-overlay","",o),O("role","dialog",o),O(e,v(String(sn)),o),A("click",Gn,o),G=E(t),O(e,s(an,Dn),G),B=E(t),O("tabindex","0",B),A("focus",Zn,B),Z=E(t),O("tabindex","0",Z),A("focus",Zn,Z),H=E("button"),O("aria-label",J,H),O(e,d,H),O("type","button",o),A("click",Bn,H),Y=E(t),O("data-rmiz-zoomed","",Y),O(e,l,Y),y(n,Y),y(G,o),y(B,o),y(H,o),y(Y,o),y(Z,o),o},Vn=function(){W&&k((function(n){var t=n.getAttribute("aria-hidden");t&&gn.push([n,t]),n.setAttribute("aria-hidden","true")}),W)},Xn=function(){bn===n.LOADED&&(x(H),Y&&A("transitionend",Fn,Y),G&&O(e,s(an,Dn),G)),bn!==n.UNLOADED&&Yn(n.UNLOADING),W&&(k((function(n){z("aria-hidden",n)}),W),gn.forEach((function(n){var t=n[0],o=n[1];t&&O("aria-hidden",o,t)})),gn=[])};return Ln(),{cleanup:Cn,update:function(t){void 0===t&&(t={}),t.closeText&&(J=t.closeText),t.modalText&&(X=t.modalText),t.openText&&(tn=t.openText),t.overlayBgColorEnd&&(en=t.overlayBgColorEnd),t.overlayBgColorStart&&(an=t.overlayBgColorStart),t.transitionDuration&&(Dn=t.transitionDuration),t.zoomMargin&&(ln=t.zoomMargin),t.zoomZindex&&(sn=t.zoomZindex),$n(),bn===n.UNLOADED&&t.isZoomed?qn():bn===n.LOADED&&!1===t.isZoomed&&Xn()}}}}();
